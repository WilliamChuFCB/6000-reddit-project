---
title: "NLP - Reddit Data about Soccer"
author:
  - name: Jingda Yang, Wendi Chu, Haiyu Xiao, Tingsong Li

execute:
  echo: false

format:
  html:
    embed-resources: true
    self-contained: true
    page-layout: full
    fig-cap-location: bottom
    toc: true
    toc-location: left
    toc-title: Contents
---



- Topics:

  1. 
  - Business Goal: Identify the teams or players linked to the highest levels of toxicity in Reddit conversations.
  - Technical Proposal: Create a manual dictionary mapping major team and league names to their respective subreddit names. Gather Reddit posts from a variety of subreddits listed in the dictionary. Establish a processing pipeline to clean and tokenize the text of these posts. Train a toxicity content classifier using a labeled dataset obtained from Kaggle. Apply the trained model to the preprocessed posts and visualize the results using a bar plot.

   2. 
  - Business Goal: Determine if there is a relationship between the changes of sentiment in soccer subreddits and major events (e.g., wins, losses, transfers). 
  - Technical Proposal: Match the Reddit data with key soccer events using dates and team/player mentions. Utilize NLP techniques to assign sentiment scores to each post and comment, and label the dataset with sentiment scores. Investigate sentiment before, during, and after major events. Display sentiment trends over time with event markers.

  3. 
  - Business goal: Examine how soccer fans feel about the 2022 World Cup, and how their feelings evolve over time.

  - Technical proposal: First extract all the posts relevant to the 2022 World Cup from all the available records. Then apply sentiment analysis for each post to examine the feeling towards the World Cup. Finally track the sentiment over time to see how soccer fans' feelings change.

## Executive summary


### Topic 3:

This NLP analysis suggests that of all the sub-topics about the World Cup 2022, people discussed the players most frequently. Additionally, a large amount of people might not be satisfied with certain judgments from the referees during the World Cup. It is also noticeable that people's general attitude towards the World Cup 2022 did not change much over time.

## Analysis report

### Topic 3

This section analyzes sentiment over time for Reddit comments related to the 2022 World Cup. Firstly, a regex pattern, defined by key words, filters relevant posts. Then, three dummy variables were introduced to determine if posts are related to champions, players, or referees. A pre-trained sentiment analysis model was employed to categorize the sentiment of each post. Here is a resulting cross-tabulation showing the post counts across sentiment categories within each World Cup sub-topic.

```{python, echo=FALSE}
#| label: tbl-planets1
#| tbl-cap: Cross-tabulation of Sentiment Analysis about the World Cup
import pandas as pd
import numpy as np

df1 = pd.read_csv('../../data/csv/worldcup_count_table.csv')
df1
```

A grouped barplot is also created to visualize the sentiment by category. 

```{python, echo=FALSE}
#| label: fig-polar2
#| fig-cap: Category-wise Sentiment Analysis about the World Cup
from PIL import Image
with Image.open("../../data/plots/worldcup_sentiment_count_by_category.png") as img2:
    display(img2)
```

This plot reveals a notably higher post volume about players compared to other sub-topics. Additionally, the champion-related posts had a greater share of positive sentiment, while referee-related posts skewed negative, hinting at dissatisfaction with referees' decisions.

In the subsequent section, sentiment analysis was conducted on a weekly basis, calculating the total, positive, negative, and neutral post counts for each week within the timeframe. Here is a table summarizing this weekly data and a time series plot for visualization.

```{python, echo=FALSE}
#| label: tbl-planets3
#| tbl-cap: Weekly Summary Data of Sentiment Analysis about the World Cup
import pandas as pd
import numpy as np

df3 = pd.read_csv('../../data/csv/worldcup_weekly_count.csv')
df3
```

```{python, echo=FALSE}
#| label: fig-polar4
#| fig-cap: Weekly Sentiment Post Counts and Psitive Percentage about the World Cup
from PIL import Image
with Image.open("../../data/plots/worldcup_weekly_sentiment_post_counts.png") as img4:
    display(img4)
```

The time series plot shows no distinct trend in post volume throughout the period. The numbers of positive and negative posts paralleled the overall post trend, while the count of neutral posts remained low and steady. The proportion of positive posts was relatively unchanged, indicating that general attitudes towards the World Cup did not significantly fluctuate over time.

